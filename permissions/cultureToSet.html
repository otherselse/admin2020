<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="http://resource.lgsteel.cn/public/images/favicon.ico"
        mce_href="http://resource.lgsteel.cn/public/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://resource.lgsteel.cn/public/style/lib.css" type="text/css" />
    <link rel="stylesheet" href="http://resource.lgsteel.cn/gold2020/css/uiElement.css" type="text/css" />
    <link rel="stylesheet" href="../css/admin.css?v=1" type="text/css" />
    <title>文化系统-权限管理-乐刚智能云系统</title>
    <script type="text/javascript" src="http://resource.lgsteel.cn/public/js/jquery-1.8.3.min.js"></script>
    <link type="text/css" rel="stylesheet" href="http://resource.lgsteel.cn/public/js/qtip2/jquery.qtip.min.css">  

</head>

<body class="showTip">
    <script type="text/javascript" src="../js/topBar.js"></script>
    <!-- 头部菜单 -->
    <script type="text/javascript" src="../js/menu.js"></script>
    <script type="text/javascript" src="menu_toas.js"></script><!-- 静态页面定位使用，开发去掉，用于评审管理使用 -->
    <script type="text/javascript" src="../js/leftBar.js"></script>
    <!-- 左侧菜单 -->

    <div class="rightBar">
        <div class="nav ovh">
            <div class="l gga">
                <a href="../index/index.html" class="gga">首页</a>
                <span class="dib gga pl5 pr5">/</span>
                权限管理
                <span class="dib gga pl5 pr5">/</span>
                <span class="g28">文化系统</span>
            </div>
            <div class="r m_dn">
                左侧菜单栏 <a href="javascript:void(0)" class="ui-switch goldIcon vm on setLeftBar"></a>
            </div>
        </div>

        <div class="ui-tab3">
                <a href="cultureToSet.html" class="ui-tab3-list rel on"><span class="ui-tab3-text">人员配置权限</span><i class="goldIcon ui-tab3-dot"></i></a>
                <a href="cultureToClone.html" class="ui-tab3-list rel"><span class="ui-tab3-text">权限复制</span><i class="goldIcon ui-tab3-dot"></i></a>
                <a href="cultureToPerson.html" class="ui-tab3-list rel"><span class="ui-tab3-text">菜单配置人员</span><i class="goldIcon ui-tab3-dot"></i></a>
                <a href="cultureToApproval.html" class="ui-tab3-list rel"><span class="ui-tab3-text">审批配置人员</span><i class="goldIcon ui-tab3-dot"></i></a>
                <a href="cultureToRole.html" class="ui-tab3-list rel"><span class="ui-tab3-text">角色配置人员</span><i class="goldIcon ui-tab3-dot"></i></a>
                <a href="cultureToArea.html" class="ui-tab3-list rel"><span class="ui-tab3-text">人员配置区域</span><i class="goldIcon ui-tab3-dot"></i></a>
                <a href="cultureToAchieve.html" class="ui-tab3-list rel"><span class="ui-tab3-text">业绩考核权限</span><i class="goldIcon ui-tab3-dot"></i></a>
            </div>
        <div class="ui-content minH">
            <div class="p20">
               <div class="pb20 bbe">
                    <span class=" dib pct10"><span class="searchLable">人员：</span><span class="f12 g80">单选</span></span>
                    <button class="ui-button w96" data-type="normal" type="button">选择人员</button>
                </div><!-- 人员end -->
                <div class="pb20 bbe pt20 ">
                    <span class=" dib pct10"><span class="searchLable">区域：</span><span class="f12 g80">非必选</span></span>
                    <span class="dib pct85 checkbox f12">
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>上海</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>上海加工</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>杭州</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>无锡</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>天津</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>自贸区</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>广州</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>宁波</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>常熟</label></span>
                        <span class="dib pct8 "><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>成都</label></span>
                    </span>
                </div><!-- 区域end -->                
                <div class="pb20 bbe pt20 ">
                    <span class=" dib pct10 vt"><span class="searchLable">角色：</span><span class="f12 g80">非必选</span></span>
                     <span class="dib pct85 checkbox f0 lh24">
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>分控专员</label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>财务专员</label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>分控物流
                    </label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>区域经理</label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>外贸收款短信提醒</label></span>

                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>财务开票</label></span>
                            <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>外贸运营经理</label></span>
                            <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>金牌商家账户充值
                        </label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>RFQ短息接受人员</label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>外贸收款短信提醒</label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>区域经理</label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>外贸收款短信提醒</label></span>

                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>财务开票</label></span>
                            <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>外贸运营经理</label></span>
                            <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>金牌商家账户充值
                        </label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>RFQ短息接受人员</label></span>
                        <span class="dib pct20 f12"><label><i class="ui-checkbox goldIcon v-3 mr5 "><input type="checkbox" class="checkbox-opacity" name="checkbox"></i>外贸收款短信提醒</label></span>
                    </span>

                </div><!-- 角色end -->

                <div class="mt20"><span class="t_linerbg"><span class="pl10 searchLable">菜单权限：</span></span></div>
                <table class="ui-table f12 tc mt15 pct100">
                    <tbody>
                        <tr class="resource-table">
                            <td width="10%" rowspan="2" class="bgfa">
                                <span class="searchLable f14">文化系统</span><br>
                                <span class="g80">（可多选）</span>
                            </td>
                            <td width="90%" class="cont bgfa" style="padding-top:5px;padding-bottom: 5px">
                                <div class="ui-tab4 n16_isMulS">
                                    <a href="javascript:void(0)" class="ui-tab4-list on w76 mt5 mb5" onclick="setCultureSystem(this)" id="600">文化系统菜单</a>
                                    <a href="javascript:void(0)" class="ui-tab4-list w76 mt5 mb5" onclick="setCultureFlow(this)" id="1857">文化系统流程中心</a>
                                </div>
                            </td>
                        </tr>
                        <tr class="resource-table">
                          <td class="cont  n16_menuMulbgS" >
                          </td>
                        </tr>
                        <tr class="resource-table">
                            <td class="bgfa ">
                                <span class="searchLable f14">已选</span><br>
                                <span class="g80">文化系统菜单</span>
                            </td>
                            <td class="cont chooseMenu">
                            </td>
                        </tr>
                        <tr class="resource-table">
                            <td  class="bgfa ">
                                <span class="searchLable f14">已选</span><br>
                                <span class="g80">文化系统流程中心</span>
                            </td>
                            <td class="cont chooseFlow">
                                
                            </td>
                        </tr>
                    </tbody>
                </table>


                
            </div>
        </div>
    </div>



    <script type="text/javascript" src="../js/admin.js"></script>
    <script type="text/javascript" src="http://resource.lgsteel.cn/public/js/qtip2/jquery.qtip.min.js"></script>
    <script>
        $(function () {
            $(".mulfolder").eq(2).addClass("open").find(".smlist ").eq(0).addClass("on"); 	// 静态页面定位使用，开发使用title等定位
            $(".n16_isMulS").find(".ui-tab4-list.on").click();  //初始化显示选中的菜单的子菜单

            /*$("body").on("click",function(){
                $(".setMulPanelCont").hide();
            })*/
        })


        //定义菜单权限数组,只搜索到一级菜单，以及菜单名称、id、以及子菜单个数
        var cul_Data=[
            {"title":"文化系统菜单",
             "id":600,
             "menuList":[
                         {"title":"费用统计报表", "id":638,"childnum":0}
                         ,{"title":"查询统计", "id":604,"childnum":5}
                         ,{"title":"生产安全试卷管理", "id":640,"childnum":0}

                    ]
            }
            ,{"title":"文化系统流程中心",
             "id":1857,
             "menuList":[
                         {"title":"流程中心", "id":1858,"childnum":5}

                    ]
            }
        ]
        
        //文化菜单
        function setCultureSystem(obj){
            setMulThValueNewOne(obj,1); //type=1,显示到文化菜单处
        }

        //文化流程
        function setCultureFlow(obj){
            setMulThValueNewOne(obj,2);//type=1,显示到文化流程处
        }

        function setMulThValueNewOne(obj,type){
            var id=$(obj).attr("id");
            for(var i=0;i<cul_Data.length;i++){
                if(id==cul_Data[i].id){
                    var str="",menu='';
                    for(var j=0;j<cul_Data[i].menuList.length;j++){
                        if(cul_Data[i].menuList[j].childnum==0){
                             menu=' <span class="dib pct20 f12"><span class="man_list" onclick="setMulThValueNew(this,'+type+',event)" id="'+cul_Data[i].menuList[j].id+'" childnum="0"><i class="ui-checkbox-unable goldIcon v-3 mr5"></i>'+cul_Data[i].menuList[j].title+'</span></span>'
                        }else{
                            menu='<span class="dib pct20 f12 rel " ><span class="man_list"  onclick="setMulPanel(this,'+type+',event)" id="'+cul_Data[i].menuList[j].id+'" childnum="'+cul_Data[i].menuList[j].childnum+'"><i class="mulselIcon admIcon v-3 mr5"></i>'+cul_Data[i].menuList[j].title+'</span><span class="setMulPanelCont"></span></span>'
                        }
                        str+=menu
                       
                    }
                 //console.log(str)
                 break;
                }
            }
            var menustr='<div class="n16_menulist checkbox">'+
                        '            <span class="dib pct10 vt mt2 pt1 n16_menulistContLeft">'+
                        '                <label><i class="ui-checkbox goldIcon v-3 mr5"><input type="checkbox" class="checkbox-opacity" name="checkbox" onclick="setSmallMenu(this)"></i>全选</label>'+
                        '            </span>'+
                        '            <span class="dib pct85 f0 lh24 n16_menulistCont">'+str+'</span>'+
                        '      </div> '
            $(".n16_menuMulbgS").html(menustr)

            $(obj).addClass("on").siblings().removeClass("on");

        }
      
    //点击最末级菜单选择
      function setMulThValueNew(obj,type,e,flag){
        stopPro(e);
        var myobj='',str='';
        if(type==1){
            myobj=$(".chooseMenu")
        }else{
            myobj=$(".chooseFlow")
        }
        var pid=$(obj).parents(".setMulPanelMCont ").attr("pid")||"0";
        if($(obj).find(".ui-checkbox-unable").hasClass("on")){ //选中，点击
            $(obj).find(".ui-checkbox-unable").removeClass("on");
            var myid="sort"+$(obj).attr("id");
            $("#"+myid).remove();
            if(flag==1){   //假如下拉菜单下，不选择
                var mychain=$(obj).parents(".setMulPanelMCont ").attr("chain")
                myobj.find(".chooseSmallCont").each(function(){
                    if(mychain.indexOf($(this).attr("pid"))>-1){
                        if($(this).find(".n16_menudel").length==0){
                            $(this).remove();
                        }
                    }
                })
                setArrowOff(obj,type,e,flag);

            } 

        }else{ //没选中，点击
            $(obj).find(".ui-checkbox-unable").addClass("on");
            
            var chain=$(obj).parents(".setMulPanelMCont").attr("chain")||"0"
            if($(obj).attr("childnum")){ //增加已选文化系统菜单
                str='<a href="javascript:void(0)" onclick="delCulMenu(this)" class="n16_menudel" id="sort'+$(obj).attr("id")+'" pid="'+pid+'" chain="'+chain+'">'+$(obj).text()+'<i class="icon-menudel admIcon"></i></a>';

                if(flag==1){ //表示是从下拉菜单中选择

                    $("#"+pid).find(".mulselIcon").addClass("on") //一旦点击选中则下拉选中
                    var chainArr=$(obj).parents(".setMulPanelMCont ").attr("chain").split(",");
                    for(var i=0;i<chainArr.length;i++){
                        
                        if(!$("#"+chainArr[i]).find(".mulselIcon").hasClass("on")){
                            $("#"+chainArr[i]).find(".mulselIcon").addClass("on")
                        }
                    }

                     var pn=$(obj).parents(".setMulPanelCont").attr("pname");
                     var pid=$(obj).parents(".setMulPanelCont").attr("pid");
                    
                     //myobj.append(str)
                     var mf=0;
                     myobj.find(".chooseSmallCont").each(function(){
                        if($(this).attr("pid")==pid){
                            $(this).append(str);
                            mf++
                        }
                     })

                     if(mf==0){
                         str="<div class='chooseSmallCont' pid="+pid+"><span class='g68'>"+pn+"</span><br/>"+str+"</div>";
                        myobj.append(str);
                     }

                }else{

                     myobj.append(str);
                }

               
            }
        }
       
      }

      //点击多选的菜单，显示下级菜单
      function setMulPanel(obj,type,e){
            stopPro(e);
            var myobj=$(obj).next(".setMulPanelCont");
            myobj.attr("pname",$(obj).text()).attr("pid",$(obj).attr("id"));
            //查询出一级下级菜单列表
            var myarr=[
                 {"title":"费用支出", "id":684,"childnum":0}
                 ,{"title":"费用收入", "id":2061,"childnum":5}
                 ,{"title":"外贸用章", "id":689,"childnum":0}
                 ,{"title":"办公用品登记", "id":2117,"childnum":0}
            ]
            /*var myarr=[
                         {"title":"费用支出查询", "id":684,"childnum":[
                            {"title":"生产(查询统计费用支出)", "id":1604,"childnum":[
                                {"title":"仓储费(查询统计费用支出生产)", "id":1688,"childnum":[]}
                                ,{"title":"生产用具费(查询统计费用支出生产)", "id":1689,"childnum":[]}
                                ,{"title":"生产维修费(查询统计费用支出生产)", "id":1690,"childnum":[]}
                                ,{"title":"其他(查询统计费用支出生产)", "id":1691,"childnum":[]}
                            ]}                           
                         ]}
                          ,{"title":"费用收入(查询统计)", "id":2061,"childnum":[
                                {"title":"租赁费(查询统计)", "id":2062,"childnum":[
                                    {"title":"其他费用收取(查询统计)", "id":2066,"childnum":[]}
                                    ,{"title":"租金收取(查询统计)", "id":2067,"childnum":[]}
                                    ,{"title":"合同录入(查询统计)", "id":2068,"childnum":[]}
                                    ,{"title":"其他费用录入(查询统计)", "id":2069,"childnum":[]}
                                ]}
                               ,{"title":"租赁费2", "id":2070,"childnum":[]}
                            ]}
                         ,{"title":"外贸用章", "id":689,"childnum":[]}
                         ,{"title":"办公用品登记", "id":2117,"childnum":[]}
                    ];*/
            var mystr='';
            for(var i=0;i<myarr.length;i++){
                var dom=''
                if(myarr[i].childnum==0){
                    dom='<div class="setMulPanelMenu " id='+myarr[i].id+'  onclick="setMulThValueNew(this,'+type+',event,1)" childnum="'+myarr[i].childnum+'"><i class="ui-checkbox-unable goldIcon v-3 mr5"></i>'+myarr[i].title+'</div>'
                }else{
                    dom='<div class="setMulPanelMenu " onclick="setMulPanelSec(this,1,event)"  id='+myarr[i].id+' childnum="'+myarr[i].childnum+'"><i class="mulselIcon admIcon v-3 mr5"></i>'+myarr[i].title+'</div>'
                }
                mystr+=dom
               
            }
            mystr='<div class="setMulPanelMCont" pid='+$(obj).attr("id")+' chain='+$(obj).attr("id")+'><div class="closeMenuUp"><a class="goldIcon  icon-sdel " onclick="closeMenubg(this)" href="javascript:void(0)"></a></div>'+mystr+"</div>"
            if(myobj.find(".setMulPanelMCont").length>0){
                myobj.find(".setMulPanelMCont").each(function(){
                    if($(this).attr("pid")==$(obj).attr("id")){
                         myobj.show();
                    }
                })
            }else{
                 myobj.append(mystr).show();
            }
            
            

      }

      //每次查询显示当前菜单的下级菜单
      function setMulPanelSec(obj,type,e){
         stopPro(e);
         var myarr=[
            {"title":"仓储费", "id":1688,"childnum":0}
            ,{"title":"生产用具费", "id":1689,"childnum":3}
            ,{"title":"生产维修费", "id":1690,"childnum":0}
            ,{"title":"其他", "id":1691,"childnum":0}
        ]
        var l=$(obj).parents(".setMulPanelCont").find(".setMulPanelMCont").length
        var left=l*165;
        var bid=$(obj).parents(".setMulPanelMCont").attr("pid")
        if(type==1){
            myobj=$(".chooseMenu")
        }else{
            myobj=$(".chooseFlow")
        }

        var mystr='';
            for(var i=0;i<myarr.length;i++){
                var dom=''
                if(myarr[i].childnum==0){ 
                    var hasOn="";
                    myobj.find(".n16_menudel").each(function(){ //判断已选中是否存在，存在即显示选中
                        if($(this).attr("id")=="sort"+myarr[i].id){
                            hasOn="on";
                            return false;
                        }


                    })
                    //console.log(hasOn);
                    dom='<div class="setMulPanelMenu " id='+myarr[i].id+'  onclick="setMulThValueNew(this,'+type+',event,1)" childnum="'+myarr[i].childnum+'"><i class="ui-checkbox-unable goldIcon v-3 mr5 '+hasOn+'"></i>'+myarr[i].title+'</div>'
                }else{
                    var hasArrow=""; //用于查找下拉箭头是否选中
                    var mychainid=$(obj).parents(".setMulPanelMCont").attr("chain")+","+$(obj).attr("id")+","+myarr[i].id;
                   //console.log(myarr[i].id)

                    if(myobj.find(".n16_menudel[chain='"+mychainid+"']").length>0){
                        hasArrow="on"
                    }

                    dom='<div class="setMulPanelMenu " onclick="setMulPanelSec2(this,1,event)"  id='+myarr[i].id+' childnum="'+myarr[i].childnum+'"><i class="mulselIcon admIcon v-3 mr5 '+hasArrow+'"></i>'+myarr[i].title+'</div>'
                }
                mystr+=dom
               
            }

        var chain=$(obj).parents(".setMulPanelMCont").attr("chain");
        chain=chain+","+$(obj).attr("id");
        var str='<div class="setMulPanelMCont " bid="'+bid+'" pid="'+$(obj).attr("id")+'" style="left:'+left+'px" chain="'+chain+'">'+mystr+'</div>'
            var myflag=0;
                $(obj).parents(".setMulPanelCont").find(".setMulPanelMCont").each(function(){
                    if($(this).attr("bid")==bid){
                        $(this).attr("pid",$(obj).attr("id"))
                        $(this).html(mystr);
                        myflag++;
                        return false;
                    }
                })

                if(myflag==0){
                     $(obj).parents(".setMulPanelCont").append(str);

                }

            
      }




      //只是用于数据展示  setMulPanelSec2与setMulPanelSec 方法一样。只是myarr 数据读取不一样。
      function setMulPanelSec2(obj,type,e){
        stopPro(e);
         var myarr=[
            {"title":"生产用具1", "id":5550,"childnum":0}
            ,{"title":"生产用具2", "id":5551,"childnum":0}
            ,{"title":"生产用具3", "id":5552,"childnum":0}
        ]
                var l=$(obj).parents(".setMulPanelCont").find(".setMulPanelMCont").length
        var left=l*165;
        var bid=$(obj).parents(".setMulPanelMCont").attr("pid")
        if(type==1){
            myobj=$(".chooseMenu")
        }else{
            myobj=$(".chooseFlow")
        }

        var mystr='';
            for(var i=0;i<myarr.length;i++){
                var dom=''
                if(myarr[i].childnum==0){ 
                    var hasOn="";
                    myobj.find(".n16_menudel").each(function(){ //判断已选中是否存在，存在即显示选中
                        if($(this).attr("id")=="sort"+myarr[i].id){
                            hasOn="on";
                            return false;
                        }


                    })
                    //console.log(hasOn);
                    dom='<div class="setMulPanelMenu " id='+myarr[i].id+'  onclick="setMulThValueNew(this,'+type+',event,1)" childnum="'+myarr[i].childnum+'"><i class="ui-checkbox-unable goldIcon v-3 mr5 '+hasOn+'"></i>'+myarr[i].title+'</div>'
                }else{
                    var hasArrow=""; //用于查找下拉箭头是否选中
                    var mychainid=$(obj).parents(".setMulPanelMCont").attr("chain")+","+$(obj).attr("id")+","+myarr[i].id;
                   //console.log(myarr[i].id)

                    if(myobj.find(".n16_menudel[chain='"+mychainid+"']").length>0){
                        hasArrow="on"
                    }

                    dom='<div class="setMulPanelMenu " onclick="setMulPanelSec2(this,1,event)"  id='+myarr[i].id+' childnum="'+myarr[i].childnum+'"><i class="mulselIcon admIcon v-3 mr5 '+hasArrow+'"></i>'+myarr[i].title+'</div>'
                }
                mystr+=dom
               
            }

        var chain=$(obj).parents(".setMulPanelMCont").attr("chain");
        chain=chain+","+$(obj).attr("id");
        var str='<div class="setMulPanelMCont " bid="'+bid+'" pid="'+$(obj).attr("id")+'" style="left:'+left+'px" chain="'+chain+'">'+mystr+'</div>'
            var myflag=0;
                $(obj).parents(".setMulPanelCont").find(".setMulPanelMCont").each(function(){
                    if($(this).attr("bid")==bid){
                        $(this).attr("pid",$(obj).attr("id"))
                        $(this).html(mystr);
                        myflag++;
                        return false;
                    }
                })

                if(myflag==0){
                     $(obj).parents(".setMulPanelCont").append(str);

                }

      }

      function closeMenubg(obj){
        $(obj).parents(".setMulPanelCont").hide();
        $(obj).parents(".setMulPanelCont").find(".setMulPanelMCont:gt(0)").remove();
      }

      //处理点击取消情况下，各级折叠下拉菜单图标是否选中
      function setArrowOff(obj,type,e,flag){
       
        var chainArr=$(obj).parents(".setMulPanelMCont").attr("chain").split(",");
        for(var i=chainArr.length-1;i>=0;i--){
            //console.log(chainArr[i])
            var l=$(obj).parents(".setMulPanelCont").find(".setMulPanelMCont[pid='"+chainArr[i]+"']").find(".on").length;
            if(l==0){
                $("#"+chainArr[i]).find(".mulselIcon").removeClass("on");
            }


        }
      }

      function delCulMenu(obj){
        var l=$(obj).parents(".chooseSmallCont").length;
        var id=$(obj).attr("id").replace("sort","");
       // console.log(id)
        if(l==0){
            $("#"+id).find(".ui-checkbox-unable").removeClass("on");
            $(obj).remove();
        }else{
            var myobj=$(obj).parents(".chooseSmallCont");
            $("#"+id).find(".ui-checkbox-unable").removeClass("on");
            $(obj).remove();
            if(myobj.find(".n16_menudel").length==0){ //假如全部没有去掉标题及所有  ！！！明天加上
                $("#"+id).find(".ui-checkbox-unable").removeClass("on");
                 myobj.remove();
            }


        }
      }

    </script>
</body>

</html>